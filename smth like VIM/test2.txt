
#include <stdio.h>
#include <math.h>
#include <string.h>
#define SIZE 24

int printboard(int board[24][24], int n) {
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < n; j++) {
			printf("%d ", board[i][j]);
		}
		printf("\n");
	}
	return 0;
}

int put(int x, int y, int board[24][24]) {  //можно ли ставить. если 1 - да
	int movesX[] = {0, 2, 1, -1, -2, -2, -1, 1, 2};
	int movesY[] = {0, 1, 2, 2, 1, -1, -2, -2, -1};
	int flag = 0;
	for (int i = 0; i < 9; i++) {
		for (int j = 0; j < 9; j++) {
			if (board[x + movesX[i]][y + movesY[i]] == 1) return 0; //если по этим координатам что-то стоит или клетка под боем, возвращаем 0
		}
	}
	return 1;
}


int solution(int n, int l, int k, int x0, int y0, int num, int board[24][24], int* ukvar, FILE* output) { // num - количество уже стоящих, x0 - координата x, начиная с которой ищем новые места
	if (num == l) { // если поставили нужное количество выводим ответ и тормозим
		for (int x = 0; x < n; x++) {
			for (int y = 0; y < n; y++) {
				if (board[x][y] == 1) fprintf(output, "(%d, %d)", x, y);
			}
		}
		fprintf(output, "\n");
		(*ukvar)++;
		return 0;
	}

	for (int x = x0; x < n; x++) {    // пробегаемся по доске
		for (int y = y0; y < n; y++) {
			if (put(x, y, board)) {  // и ищем место, куда можно поставить фигуру
				board[x][y] = 1; // ставим
				if (y == n - 1) solution(n, l, k, x + 1, 0, num + 1, board, ukvar, output); // идем до следующей. Если дошли до края по y, автоматически передаем верные данные в след. вызов
				else solution(n, l, k, x, y, num + 1, board, ukvar, output); // 
				board[x][y] = 0;  // ищем другие возможные варианты
			}
		}
		y0 = 0;  //если нулевые координаты для x0 не понадобились, то обнуляем их
	}
	return 0;
}


int main() {
	int n, l, k;
	int board[24][24];
	FILE* input = fopen("D:/Games/sex.txt", "r");
	FILE* output = fopen("D:/Games/sex2.txt", "w");
	fscanf(input, "%d", &n); // размер
	fscanf(input, "%d", &l); // сколько еще поставить
	fscanf(input, "%d", &k); // сколько уже стоит
	for (int i = 0; i < n; i++) for (int j = 0; j < n; j++) board[i][j] = 0; // заполняем нулями по умолчанию
	for (int i = 0; i < k; i++) {
		int x, y;
		fscanf(input, "%d", &x); //
		fscanf(input, "%d", &y); // 
		board[x][y] = 1; //тут стоит фигура
	}
	//printboard(board, n);
	//int x, y;
	//printf("x and y");
	//scanf("%d %d", &x, &y);
	//printf("%d", put(x, y, board));
	int var = 0; // количество вариантов расстановки. Если будет равно нулю - no solutions
	int* ukvar = &var; //указатель, чтоб верно считалось
	solution(n, l, k, 0, 0, 0, board, ukvar, output);
	if (var == 0) fprintf(output, "no solutions");

	
}
